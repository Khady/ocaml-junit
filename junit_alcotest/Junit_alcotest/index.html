<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Junit_alcotest (junit_alcotest.Junit_alcotest)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.4"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">junit_alcotest</a> &#x00BB; Junit_alcotest</nav><header class="odoc-preamble"><h1>Module <code><span>Junit_alcotest</span></code></h1><p>Interface to product JUnit reports for Alcotest</p><p>It tries to provide a layer as thin as possible on top of Alcotest to allow to port existing test without writing a lot a boilerplate.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-wrap_test"><a href="#val-wrap_test" class="anchor"></a><code><span><span class="keyword">val</span> wrap_test : 
  <span><span class="optlabel">?classname</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="../../junit/Junit/Testcase/index.html#type-t">Junit.Testcase.t</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <span class="xref-unresolved">Alcotest</span>.test_case</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Alcotest</span>.test_case</span></span></code></div><div class="spec-doc"><p><code>wrap_test handle_result test_cases</code> wraps test cases to create Junit testcases and pass them to <code>handle_result</code>.</p><p>Can be used with <a href="#val-run"><code>run</code></a> to create customized Junit testsuites if the output of <a href="#val-run_and_report"><code>run_and_report</code></a> is not as expected.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">classname</span> <p>will populate the 'classname' attribute for the test case. For best hierarchic rendering in Jenkins, it should contain a period. For example, &quot;foo.bar.baz&quot; will be rendered a package &quot;foo.bar&quot; that contains a class &quot;baz&quot;, which contains the current test case and others. Defaults to the name of the test case.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : <span><span class="optlabel">?argv</span>:<span>string array</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span>unit <span class="xref-unresolved">Alcotest</span>.test</span> list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>run ?argv n t</code> is a wrapper around <code>Alcotest.run</code>, only setting <code>and_exit</code> to false. It is mandatory to be able to process results after the end of the run.</p><p>Low level function. It is easier to use <a href="#val-run_and_report"><code>run_and_report</code></a>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-exit"><a href="#type-exit" class="anchor"></a><code><span><span class="keyword">type</span> exit</span><span> = <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>exit ()</code> exists with appropriate code if <a href="#val-run_and_report"><code>run_and_report</code></a>'s <code>and_exit</code> was <code>true</code> or raise <code>Alcotest.Test_error</code> in case of error.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run_and_report"><a href="#val-run_and_report" class="anchor"></a><code><span><span class="keyword">val</span> run_and_report : 
  <span><span class="optlabel">?and_exit</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?package</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?timestamp</span>:<span class="xref-unresolved">Ptime</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?argv</span>:<span>string array</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(string * <span><span>unit <span class="xref-unresolved">Alcotest</span>.test_case</span> list</span>)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../junit/Junit/Testsuite/index.html#type-t">Junit.Testsuite.t</a> * <a href="#type-exit">exit</a></span></code></div><div class="spec-doc"><p><code>run name tests</code> is a wrapper around <a href="#val-run"><code>run</code></a> and <a href="#val-wrap_test"><code>wrap_test</code></a>. It runs the tests and creates a Junit testsuite from the results.</p><p>As <code>Alcotest.run</code> is always called with <code>and_exit = false</code> to be able to produce a report, the behavior is emulated by the returned <a href="#type-exit"><code>exit</code></a> function.</p><p>The optional argument <code>and_exit</code> controls what happens when the <a href="#type-exit"><code>exit</code></a> function is called. By default, <code>and_exit</code> is set, which makes the function exit with <code>0</code> if everything is fine or <code>1</code> if there is an issue. If <code>and_exit</code> is <code>false</code>, then the function raises <code>Test_error</code> on error.</p><p><code>?argv</code> is forwarded to <a href="#val-run"><code>run</code></a>. <code>?package</code> and <code>?timestamp</code> are forwarded to <a href="../../junit/Junit/Testsuite/index.html#val-make"><code>Junit.Testsuite.make</code></a>.</p></div></div></div></body></html>
